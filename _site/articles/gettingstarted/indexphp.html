<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    
        <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38709464-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

    <!-- Web fonts -->
    <link href='http://fonts.googleapis.com/css?family=Sintony' rel='stylesheet' type='text/css'>

    <!-- Le styles -->
    <link href="/taldocs/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/taldocs/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/taldocs/css/pygments.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/taldocs/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="img/favicon.png">
  </head>

  <body>

        <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
        <a class="brand" href="/taldocs/index.html">TAL</a>
        <ul class="nav">

          <!-- Landing Page -->          
          <li class="active"><a href="/taldocs/index.html">Home</a></li>
          
          <!-- Getting started pages -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/taldocs/first_steps.html">First Steps</a></li>
              <li><a href="/taldocs/tutorial.html">Tutorial</a></li>
            </ul>
          </li>

          <!-- Technical overview sections -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Technical Overview</a></li>
              <li class="divider"></li>
              <li><a href="/taldocs/components.html">Components</a></li>
              <li><a href="/taldocs/layouts.html">Layouts and Sizing</a></li>
              <li><a href="/taldocs/events.html">Events</a></li>
            </ul>
          </li>
          
          <!-- Widget documentation -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Widgets<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/taldocs/widgets/using-widgets.html">Using Widgets</a></li>
              <li><a href="/taldocs/widgets/media_playback.html">Media Playback</a></li>
              <li><a href="/taldocs/widgets/focus.html">Focus Management</a></li>
              <li><a href="/taldocs/widgets/databinding.html">Data Binding</a></li>
            </ul>
          </li>
          
          <!-- Miscelaneous topics -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Other<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="storage.html">Storage</a></li>
              <li><a href="exiting.html">Exiting</a></li>

              <li><a href="/taldocs/articles/gettingstarted.html">Getting Started</a></li>
              <li><a href="/taldocs/articles/widgets.html">Widgets</a></li>
              
              <li><a href="#contact">Contact</a></li>
            </ul>
          </li>
          
          <!-- Getting started pages -->
          <li><a href="/taldocs/testing.html">Testing</a></li>
          
          <!-- FAQ Section -->
          <li><a href="/taldocs/faq.html">FAQ</a></li>
        
        </ul>
        </div>
      </div>
    </div>
    
    <a href="https://github.com/fmtvp/tal"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 9999" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"></a>
    

    
    <div class="container">
            
      <div class="row-fluid">
      
      <div class="span2">
        
        <img src="http://static.bbci.co.uk/frameworks/barlesque/2.33.0/desktop/3.5/img/blq-blocks_grey_alpha.png"></img>

        <p></p>
        <br />
        
        <p><code>ANTIE v1.0</code></p>
        <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal/zipball/master"><i class="icon-download-alt icon-white"></i> Download ZIP</a>
        <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal/tarball/master"><i class="icon-download-alt icon-white"></i> Download TAR</a>
        <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal"><i class="icon-eye-open icon-white"></i> View on GitHub</a>
        
      </div>
      
      <div class="span9">
       

      
        <p>This section and the next form an example of how to use <code>AntieFramework</code> to build a simple index. The supplied code has been written for clarity, not elegance, but should be simple to adapt.</p>

<h3 id='example_indexphp'>Example index.php</h3>

<p>In this section we will load in a device configuration and initialise <code>AntieFramework</code> As noted, device detection is out of ANTIE&#8217;s scope, so we pass in the name of the configuration as a url parameter.</p>

<p>The actual construction of the page is deferred to a class, PageBuilder, which is detailed in the next section. PageBuilder is specific to this example rather then a part of ANTIE.</p>

<p><code>index.php</code></p>

<pre><code>&lt;?php
include(&#39;antie/php/antieframework.php&#39;);
include_once(&#39;php/pagebuilder.php&#39;);</code></pre>

<p>Include AntieFramework and PageBuilder (detailed below)</p>

<pre><code>$application_id = &quot;sampleapp&quot;;</code></pre>

<p>Name your application</p>

<pre><code>$antie_config_path = &#39;antie/config&#39;;</code></pre>

<p>Define configuration path for antie - this is the default</p>

<pre><code>$antie = new AntieFramework($antie_config_path);</code></pre>

<p>Instantiate AntieFramework with config path</p>

<pre><code>$device_configuration_key = isset($_GET[&#39;config&#39;]) ? $_GET[&#39;config&#39;] : &#39;html5&#39;;</code></pre>

<p>For this example, the device config name is passed in as a URL parameter ?config=config_name Default to &#8216;html5&#8217; if no name is passed.</p>

<pre><code>$device_configuration_file_path = &quot;config/$device_configuration_key.json&quot;;</code></pre>

<p>The device configuration files will live in a folder named &#8216;config&#8217;</p>

<pre><code>try {
    $device_configuration = @file_get_contents($device_configuration_file_path);
    if (!$device_configuration)
        throw new Exception(&quot;Device ($device_configuration_key) not supported&quot;);
} catch (Exception $e) {
    echo $e-&gt;getMessage();
    exit;
}</code></pre>

<p>Load the contents of the specified device configuration file</p>

<pre><code>$device_configuration = preg_replace(&#39;/%application%/m&#39;, $application_id, $device_configuration);</code></pre>

<p>There are some %application% tokens in the configurations that need to be replaced with the application id</p>

<pre><code>$device_configuration = json_decode($device_configuration);</code></pre>

<p>Decode from a json string into a php object.</p>

<pre><code>$pageBuilder = new PageBuilder($device_configuration, $antie, $application_id);</code></pre>

<p>Create a PageBuilder instance using the decoded device config, instance of AntieFramework and application name. This will be used to construct the index.</p>

<pre><code>header(&quot;Content-Type: &quot; . $pageBuilder-&gt;getMimeType());</code></pre>

<p>Set the mime type of the index page to that required by the device</p>

<pre><code>echo $pageBuilder-&gt;generate();</code></pre>

<p>Generate the page</p>

<p>Next <a href='pagebuilderphp.md'>Constructing the index with PageBuilder and AntieFramework</a></p>

      </div>
      
      </div>
      
    </div> <!-- /container -->

        <!-- Javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/taldocs/js/jquery.min.js"></script>
    <script src="/taldocs/js/bootstrap.min.js"></script>

  </body>
</html>

