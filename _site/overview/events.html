<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    
        <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38709464-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

    <!-- Web fonts -->
    <link href='http://fonts.googleapis.com/css?family=Sintony' rel='stylesheet' type='text/css'>

    <!-- Le styles -->
    <link href="/tal/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/tal/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/tal/css/pygments.css" rel="stylesheet">
    <link href="/tal/css/main.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/tal/js/html5shiv.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="/tal/img/favicon.png">
    
  </head>

  <body>

        <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
        <a class="brand" href="/tal/index.html"><img src="/tal/img/bbclogo.png"></a>
        <ul class="nav">

          <!-- Landing Page -->          
          <li class="active"><a href="/tal/index.html">Home</a></li>
          
          <!-- Getting started pages -->
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/getting-started/introducing-tal.html">Introducing TAL</a></li>
              <li><a href="/tal/getting-started/tutorial/installation.html">Installation</a></li>
              <li><a href="/tal/getting-started/tutorial/createanindex.html">The Index</a></li>
              <li><a href="/tal/getting-started/tutorial/applicationclass.html">Launch the App</a></li>
              <li><a href="/tal/getting-started/tutorial/firstcomponent.html">First Component</a></li>
              <li><a href="/tal/getting-started/tutorial/layout.html">Example Layout &amp; Style</a></li>
            </ul>
          </li>

          <!-- Technical overview sections -->
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/overview/concepts.html">Concepts</a></li>
              <li class="divider"></li>
              <li><a href="/tal/overview/device-configuration.html">Device Config</a></li>
              <li><a href="/tal/overview/components.html">Components</a></li>
              <li><a href="/tal/overview/layouts.html">Layouts and Style</a></li>
              <li><a href="/tal/overview/events.html">Events</a></li>
            </ul>
          </li>
          
          <!-- Widget documentation -->
          <li class="dropdown active">
            <a href="/tal/widgets" class="dropdown-toggle" data-toggle="dropdown">Widgets<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/widgets/working-with-widgets.html">Working With Widgets</a></li>
              <li><a href="/tal/widgets/data-binding.html">Data Binding</a></li>
              <li><a href="/tal/widgets/media-playback.html">Media Playback</a></li>
              <li><a href="/tal/other/broadcast.html">Broadcast TV</a></li>
              <li><a href="/tal/widgets/focus-management.html">Focus Management</a></li>
              <li><a href="/tal/widgets/animation.html">Animation</a></li>
            </ul>
          </li>
          
          <!-- Miscelaneous topics -->
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Other<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/other/storage.html">Storage</a></li>
              <li><a href="/tal/other/exiting.html">Exiting</a></li>
              <li><a href="/tal/other/networking.html">Networking</a></li>
              <li><a href="/tal/other/contributing.html">Contributing</a></li>
              <li><a href="/tal/other/contact.html">Contact</a></li>
            </ul>
          </li>
          
          <!-- Class documentation -->
          <li class="active"><a href="/tal/jsdoc/index.html">JS Doc</a></li>
          
          <!-- Getting started pages -->
          <li class="active"><a href="/tal/testing.html">Testing</a></li>
          
          <!-- FAQ Section -->
          <li class="active"><a href="/tal/faq.html">FAQ</a></li>
        
        </ul>
        </div>
      </div>
    </div>
    
    


    <a href="https://github.com/fmtvp/tal"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 9999" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" alt="Fork me on GitHub"></a>
    
    <div class="container">
            
      <div class="row-fluid">
      
                <div class="span2">

          <img src="/tal/img/tal-logo-bw.jpg"></img>

          <p></p>
          <br />

          <p><code>ANTIE v1.0</code></p>
          <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal/zipball/master"><i class="icon-download-alt icon-white"></i> Download ZIP</a>
          <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal/tarball/master"><i class="icon-download-alt icon-white"></i> Download TAR</a>
          <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal"><i class="icon-eye-open icon-white"></i> View on GitHub</a>

          <div>
            <p></p>
            <p>
              <a href="https://twitter.com/TALOpenSource" class="twitter-follow-button" data-show-count="false">Follow us</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </p>
            <p>
              <a href="https://twitter.com/share" class="twitter-share-button" data-via="TALOpenSource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </p>
          </div>

        </div>


        <div class="span9" style="margin-left: 40px">
      
          <h1 id='events'>Events</h1>
<p class='lead'>The Framework implements its own event system which isolates the application from event differences across devices and provides additional useful events.</p>
<h2 id='listening_for_events'>Listening for Events</h2>

<p>You can listen for an event by attaching an event listener function to any widget in your UI. This event listener will be executed for all events of the given type that have been raised by a descendant widget in the tree.</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>widget</span><span class='p'>.</span><span class='nx'>addEventListener</span><span class='p'>(</span><span class='s2'>&quot;select&quot;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>evt</span><span class='p'>)</span> <span class='p'>{</span> <span class='p'>...</span> <span class='p'>});</span>
</code></pre></div>
<h2 id='firing_events'>Firing Events</h2>

<p>You can fire custom events in your application. Note: you should not fire an event with the same type as one that already exists within the Framework, as the Framework itself may be listening on these.</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>widget</span><span class='p'>.</span><span class='nx'>bubbleEvent</span><span class='p'>(</span><span class='k'>new</span> <span class='nx'>Event</span><span class='p'>(</span><span class='s2'>&quot;myeventtype&quot;</span><span class='p'>));</span>
</code></pre></div>
<p>You may also broadcast events. Note: use this sparingly, if you have a large complex UI graph, broadcasting an event may be slow:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>widget</span><span class='p'>.</span><span class='nx'>broadcastEvent</span><span class='p'>(</span><span class='k'>new</span> <span class='nx'>Event</span><span class='p'>(</span><span class='s2'>&quot;myeventtype&quot;</span><span class='p'>));</span>
</code></pre></div>
<h2 id='custom_events'>Custom Events</h2>
<div class='highlight'><pre><code class='javascript'><span class='cm'>/**</span>
<span class='cm'> * @fileOverview &lt;DESCRIPTION&gt;</span>
<span class='cm'> */</span>
<span class='nx'>require</span><span class='p'>.</span><span class='nx'>def</span><span class='p'>(</span><span class='s1'>&#39;yourapplication/appui/events/yourevent&#39;</span><span class='p'>,</span>
        <span class='p'>[</span><span class='s1'>&#39;antie/events/event&#39;</span><span class='p'>],</span>
        <span class='kd'>function</span><span class='p'>(</span><span class='nx'>Event</span><span class='p'>)</span> <span class='p'>{</span>
                <span class='cm'>/**</span>
<span class='cm'>                 * &lt;DECRIPTION&gt;</span>
<span class='cm'>                 *</span>
<span class='cm'>                 * @name yourapplication.appui.events.YourEvent</span>
<span class='cm'>                 * @class</span>
<span class='cm'>                 * @extends antie.events.Event</span>
<span class='cm'>                 * @param {String} yourParam An additional parameter.</span>
<span class='cm'>                 */</span>
                <span class='k'>return</span> <span class='nx'>Event</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>(</span><span class='cm'>/** @lends yourapplication.appui.events.YourEvent.prototype */</span> <span class='p'>{</span>
                        <span class='cm'>/**</span>
<span class='cm'>                         * @constructor</span>
<span class='cm'>                         * @ignore</span>
<span class='cm'>                         */</span>
                        <span class='nx'>init</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>yourParam</span><span class='p'>)</span> <span class='p'>{</span>
                                <span class='k'>this</span><span class='p'>.</span><span class='nx'>yourParam</span> <span class='o'>=</span> <span class='nx'>yourParam</span><span class='p'>;</span>
                                <span class='k'>this</span><span class='p'>.</span><span class='nx'>_super</span><span class='p'>(</span><span class='s2'>&quot;youreventtype&quot;</span><span class='p'>);</span>
                        <span class='p'>}</span>
                <span class='p'>});</span>
        <span class='p'>}</span>
<span class='p'>);</span>
</code></pre></div>
<h2 id='event_lifecycle'>Event Lifecycle</h2>

<p>Unlike DOM events, Framework events are normally one-way - there is no capture phase. Events are fired by their source and pass up through the widget graph until they hit the root widget of the application. The source of events is dependent on their type - see below for more details on each event type.</p>

<p>During event propagation, you can prevent the event from bubbling to the next level of the UI graph by calling the <code>stopPropagation()</code> method on the event, e.g:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>widget</span><span class='p'>.</span><span class='nx'>addEventListener</span><span class='p'>(</span><span class='s2'>&quot;select&quot;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>evt</span><span class='p'>)</span> <span class='p'>{</span>
         <span class='nx'>evt</span><span class='p'>.</span><span class='nx'>stopPropagation</span><span class='p'>();</span>
<span class='p'>});</span>
</code></pre></div>
<h2 id='event_types'>Event Types</h2>

<p>The framework contains many event types, below is a description of them:</p>

<h3 id='keyevent'>KeyEvent</h3>

<p>KeyEvents (<code>keyup</code>, <code>keypress</code> and <code>keydown</code>) are bubbled from the currently focused widget. For each remote button press the application fires a single keydown event, multiple keypress events (whilst the button is held down) and a single <code>keyup</code> event.</p>

<p>KeyEvents have a <code>keyCode</code> property that contains the virtual key code of the button pressed (e.g. <code>KeyEvent.VK_BACK</code>). See the KeyEvent class for a full list of virtual key codes. Note: not all keys will be available on all devices. As a minimum you can rely on 5-point navigation (<code>VK_UP</code>, <code>VK_DOWN</code>, <code>VK_LEFT</code>, <code>VK_RIGHT</code> and <code>VK_ENTER</code>).</p>

<h3 id='selectevent'>SelectEvent</h3>

<p>SelectEvents (<code>select</code>) are fired from the focused Button widget when <code>VK_ENTER</code> is pressed.</p>

<h3 id='componentevent'>ComponentEvent</h3>

<p>ComponentEvents (<code>load</code>, <code>beforerender</code>, <code>beforeshow</code>, <code>aftershow</code>, <code>beforehide</code>, <code>afterhide</code>) are fired during different parts of a <a href='components.html#component_lifecycle'>component&#8217;s lifecycle</a>. They are fired from the Component they relate to.</p>

<h3 id='focusevent_blurevent_focusdelayevent'>FocusEvent, BlurEvent, FocusDelayEvent</h3>

<p>FocusEvents (<code>focus</code>), BlurEvents (<code>blur</code>) and FocusDelayEvents (<code>focusdelay</code>) occur when focus is moved via the spatial navigation feature of the framework. When a widget obtains focus it will fire a FocusEvent, when it loses focus it will fire a BlurEvent. Buttons also fire a FocusDelayEvent one second after receiving focus, to allow you to execute code if the user pauses over a Button.</p>

<p>It is important to note that multiple BlurEvents and FocusEvents can be fired for a single spatial navigation movement. Consider the following UI:</p>

<pre><code>VerticalList (root, focused)
|-- HorizontalList
|   |-- Button1
|   |-- Button2
|--Button3 (focused)</code></pre>

<p>When UP is pressed, the UI will become:</p>

<pre><code>VerticalList (root, focused)
|-- HorizontalList (focused)
|   |-- Button1 (focused)
|   |-- Button2
|--Button3</code></pre>

<p>In this example, a BlurEvent will be fired on Button3 (as it loses focus) and a FocusEvent will be fired on Button1 and another on HorizontalList (as both become part of the focused path from root to focused Button). No events will be fired on VerticalList as its state has not changed (it was and still is in the focus path).</p>

<h3 id='databoundevent'>DataBoundEvent</h3>

<p>DataBoundEvents are fired when data is bound to lists. There are 3 types of these events: <code>beforedatabind</code>, <code>databound</code> and <code>databindingerror</code>:</p>

<p>The <code>beforedatabind</code> event is fired from the List before the <code>load()</code> method is called on the DataSource. The <code>databound</code> event is called after the data has been loaded and any resulting widgets have been appended to the List. It contains an iterator property giving you a reference to the data that has been bound (note: you will need to <code>reset()</code> the iterator to read all the data). The <code>databindingerror</code> event is fired if there is an exception or non-success response whilst performing any network requests. See <a href='../widgets/data-binding.html#data_binding_events'>Databinding Events</a> for more details.</p>

<h3 id='mediaevent_mediaerrorevent_mediasourceerrorevent'>MediaEvent, MediaErrorEvent, MediaSourceErrorEvent</h3>

<p>MediaEvents are fired by Media widgets. There are multiple types, mirroring the HTML5 MediaElement events (see mediaevent.js for a list). Please note that not all devices will support all event types. You can rely on a minimum of: <code>loadedmetadata</code>, <code>play</code>, <code>playing</code>, <code>canplay</code>, <code>pause</code>, <code>waiting</code>, <code>ended</code> and <code>timeupdate</code>.</p>

<p>MediaErrorEvents are fired when an error occurs in the Media widget that is not specific to a source. These mirror error events on the <code>&lt;video&gt;</code> and <code>&lt;audio&gt;</code> elements in HTML5.</p>

<p>MediaSourceErrorEvents are fired when an error occurs with an individual media source. These mirror error events on the <code>&lt;source&gt;</code> elements in HTML5. They contain 2 properties, url which contains the URL of the source which caused the error, and last, which is boolean true if it is the last source available.</p>

<h3 id='networkstatuschangeevent'>NetworkStatusChangeEvent</h3>

<p>This event (<code>networkstatuschange</code>) is fired when the device reports that the network status has changed (i.e. disconnected or reconnected). The event has a <code>networkStatus</code> property that has the value of <code>NetworkStatusChangeEvent.NETWORK_STATUS_OFFLINE</code> or <code>NetworkStatusChangeEvent.NETWORK_STATUS_ONLINE</code>.</p>

<h3 id='other_events'>Other Events</h3>

<p>There are a number of other widget-specific events used by the framework, these are:</p>

<p><code>PageChangeEvent</code> - this event may be fired by yourself when you change &#8216;page&#8217;. This is normally used to signify that a navigation event is reported to a stats reporting system (e.g. <em><a href='http://www.bbc.co.uk/frameworks/istats'>iStats</a></em>). If used it is the application&#8217;s responsibility to listen for these.</p>

<p><code>SelectedItemChangeEvent</code> - this event is fired by List widgets when the active child widget changes.</p>

<p><code>SliderChangeEvent</code> - this event is fired when the valid of a HorizontalSlider is changed by a user releasing <code>VK_LEFT</code> or <code>VK_RIGHT</code>.</p>

<p><code>TextChangeEvent</code> - this event is fired from a Keyboard widget when the entered text has changed.</p>

<p><code>TextPageChangeEvent</code> - this event is fired from a TextPager widget when the user pages the text up or down.</p>

        </div>
      
      </div>
      
    </div> <!-- /container -->

      <div class="footer">
    <div class="container">
      <p>TAL is an Open Source BBC project from TV Platforms in Salford</p>
      <p>All code and documentation is licensed under Apache License v2.0</p>
      <p>Documentation built using <a href="http://jekyllrb.com/">Jekyll</a>, <a href="http://twitter.github.com/bootstrap/">Bootstrap</a>, and <a href="http://pygments.org/">Pygments</a>. Hosted on GitHub pages.</p>
    </div>
  </div>
    
        <!-- Javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/tal/js/jquery.min.js"></script>
    <script src="/tal/js/bootstrap.min.js"></script>

  </body>

</html>

