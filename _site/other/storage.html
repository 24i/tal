<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    
        <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38709464-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

    <!-- Web fonts -->
    <link href='http://fonts.googleapis.com/css?family=Sintony' rel='stylesheet' type='text/css'>

    <!-- Le styles -->
    <link href="/tal/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/tal/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/tal/css/pygments.css" rel="stylesheet">
    <link href="/tal/css/main.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/tal/js/html5shiv.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="/tal/img/favicon.png">
    
  </head>

  <body>

        <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
        <a class="brand" href="/tal/index.html"><img src="/tal/img/bbclogo.png"></a>
        <ul class="nav">

          <!-- Landing Page -->          
          <li class="active"><a href="/tal/index.html">Home</a></li>
          
          <!-- Getting started pages -->
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/getting-started/introducing-tal.html">Introducing TAL</a></li>
              <li><a href="/tal/getting-started/tutorial/installation.html">Installation</a></li>
              <li><a href="/tal/getting-started/tutorial/createanindex.html">The Index</a></li>
              <li><a href="/tal/getting-started/tutorial/applicationclass.html">Launch the App</a></li>
              <li><a href="/tal/getting-started/tutorial/firstcomponent.html">First Component</a></li>
              <li><a href="/tal/getting-started/tutorial/layout.html">Example Layout &amp; Style</a></li>
            </ul>
          </li>

          <!-- Technical overview sections -->
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/overview/concepts.html">Concepts</a></li>
              <li class="divider"></li>
              <li><a href="/tal/overview/device-configuration.html">Device Config</a></li>
              <li><a href="/tal/overview/components.html">Components</a></li>
              <li><a href="/tal/overview/layouts.html">Layouts and Style</a></li>
              <li><a href="/tal/overview/events.html">Events</a></li>
            </ul>
          </li>
          
          <!-- Widget documentation -->
          <li class="dropdown active">
            <a href="/tal/widgets" class="dropdown-toggle" data-toggle="dropdown">Widgets<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/widgets/working-with-widgets.html">Working With Widgets</a></li>
              <li><a href="/tal/widgets/data-binding.html">Data Binding</a></li>
              <li><a href="/tal/widgets/media-playback.html">Media Playback</a></li>
              <li><a href="/tal/other/broadcast.html">Broadcast TV</a></li>
              <li><a href="/tal/widgets/focus-management.html">Focus Management</a></li>
              <li><a href="/tal/widgets/animation.html">Animation</a></li>
            </ul>
          </li>
          
          <!-- Miscelaneous topics -->
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Other<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/tal/other/storage.html">Storage</a></li>
              <li><a href="/tal/other/exiting.html">Exiting</a></li>
              <li><a href="/tal/other/networking.html">Networking</a></li>
              <li><a href="/tal/other/contributing.html">Contributing</a></li>
              <li><a href="/tal/other/contact.html">Contact</a></li>
            </ul>
          </li>
          
          <!-- Class documentation -->
          <li class="active"><a href="/tal/jsdoc/index.html">JS Doc</a></li>
          
          <!-- Getting started pages -->
          <li class="active"><a href="/tal/testing.html">Testing</a></li>
          
          <!-- FAQ Section -->
          <li class="active"><a href="/tal/faq.html">FAQ</a></li>
        
        </ul>
        </div>
      </div>
    </div>
    
    


    <a href="https://github.com/fmtvp/tal"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 9999" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" alt="Fork me on GitHub"></a>
    
    <div class="container">
            
      <div class="row-fluid">
      
                <div class="span2">

          <img src="/tal/img/tal-logo-bw.jpg"></img>

          <p></p>
          <br />

          <p><code>TAL_1.2.9b</code></p>
          <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal/zipball/master"><i class="icon-download-alt icon-white"></i> Download ZIP</a>
          <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal/tarball/master"><i class="icon-download-alt icon-white"></i> Download TAR</a>
          <a class="btn btn-block btn-danger" type="button" href="https://github.com/fmtvp/tal"><i class="icon-eye-open icon-white"></i> View on GitHub</a>

          <div>
            <p></p>
            <p>
              <a href="https://twitter.com/TALOpenSource" class="twitter-follow-button" data-show-count="false">Follow us</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </p>
            <p>
              <a href="https://twitter.com/share" class="twitter-share-button" data-via="TALOpenSource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </p>
          </div>

        </div>


        <div class="span9" style="margin-left: 40px">
      
          <h1 id='storage'>Storage</h1>
<p class='lead'>The framework provides an abstracted notion of storage. Both session and persistent storage providers are available with a common API that allows you to maintain a key-object store.</p>
<h2 id='obtaining_a_storage_provider'>Obtaining a Storage Provider</h2>

<p>You can obtain a storage provider via the device abstraction layer.</p>

<p>To obtain a storage provider, call <code>device.getStorage(...)</code>, e.g, to obtain session storage, call:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>storage</span> <span class='o'>=</span> <span class='nx'>device</span><span class='p'>.</span><span class='nx'>getStorage</span><span class='p'>(</span><span class='nx'>StorageProvider</span><span class='p'>.</span><span class='nx'>STORAGE_TYPE_SESSION</span><span class='p'>,</span> <span class='nx'>namespace</span><span class='p'>);</span>
</code></pre></div>
<p>or to obtain persistent storage, call:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>storage</span> <span class='o'>=</span> <span class='nx'>device</span><span class='p'>.</span><span class='nx'>getStorage</span><span class='p'>(</span><span class='nx'>StorageProvider</span><span class='p'>.</span><span class='nx'>STORAGE_TYPE_PERSISTENT</span><span class='p'>,</span> <span class='nx'>namespace</span><span class='p'>);</span>
</code></pre></div>
<p>The namespace is the storage namespace you wish to use. It is recommended that you use your application name - this prevents applications from affecting others running on the device.</p>

<h2 id='storing_a_value'>Storing a Value</h2>

<p>One you&#8217;ve obtained a storage provider, you may call the <code>setItem(...)</code> method to store an object:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>storage</span><span class='p'>.</span><span class='nx'>setItem</span><span class='p'>(</span><span class='nx'>key</span><span class='p'>,</span> <span class='nx'>value</span><span class='p'>);</span>
</code></pre></div>
<p>Any previous item with the same key will be overwritten.</p>

<p><em>Note:</em> The object must be JSON persistable i.e. contain no methods, or cyclic references.</p>

<h2 id='retrieving_a_value'>Retrieving a Value</h2>

<p>You can receive a previously stored value using:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>value</span> <span class='o'>=</span> <span class='nx'>storage</span><span class='p'>.</span><span class='nx'>getItem</span><span class='p'>(</span><span class='nx'>key</span><span class='p'>);</span>
</code></pre></div>
<h2 id='removing_a_value'>Removing a Value</h2>

<p>If you no-longer require a value, it is recommended that you remove it. Storage space is limited on many devices (see <a href='#Limitations'>Limitations</a>), so clearing up after yourself is important. You can remove a value using:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>storage</span><span class='p'>.</span><span class='nx'>removeItem</span><span class='p'>(</span><span class='nx'>key</span><span class='p'>);</span>
</code></pre></div>
<h2 id='clearing_a_namespace'>Clearing a Namespace</h2>

<p>If you want to remove all data stored within a namespace, you can call the clear method, e.g.:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>storage</span><span class='p'>.</span><span class='nx'>clear</span><span class='p'>();</span>
</code></pre></div>
<h2 id='limitations'>Limitations</h2>

<p>As the storage implementation varies on a device-by-device basis you must cater for the lowest specification target device. Many devices use HTTP Cookies for storage, and therefore have a maximum limit of 4KB per namespace (each namespace is stored as a separate cookie).</p>

<p>The framework does not at present enforce this limit, so it is up to you to be conservative when persisting data.</p>

<p>As cookies or other non-encrypted storage mechanisms may be used, it is important that you do not store personal information in cookies. There are encryption libraries available for JavaScript which you can use to encrypt the data you store. In most cases you are likely to only need to store hashes, in which case the framework provides an <a href='https://github.com/fmtvp/tal/blob/master/static/script/lib/sha1.js'>SHA-1</a> and <a href='https://github.com/fmtvp/tal/blob/master/static/script/lib/math.seedrandom.js'>seedable secure pseudorandom number generator</a>. Please remember to salt any hashes.</p>

        </div>
      
      </div>
      
    </div> <!-- /container -->

      <div class="footer">
    <div class="container">
      <p>TAL is an Open Source BBC project from TV Platforms in Salford</p>
      <p>All code and documentation is licensed under Apache License v2.0</p>
      <p>Documentation built using <a href="http://jekyllrb.com/">Jekyll</a>, <a href="http://twitter.github.com/bootstrap/">Bootstrap</a>, and <a href="http://pygments.org/">Pygments</a>. Hosted on GitHub pages.</p>
    </div>
  </div>
    
        <!-- Javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/tal/js/jquery.min.js"></script>
    <script src="/tal/js/bootstrap.min.js"></script>

  </body>

</html>

